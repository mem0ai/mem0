# Production Configuration for Self-Hosted mem0 Server
# Optimized for AI WhatsApp Assistant Integration

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Configuration (aligned with AI WhatsApp Assistant)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=whatsapp_assistant
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_password
POSTGRES_COLLECTION_NAME=mem0_memories

# Connection Pool Settings for Production
POSTGRES_POOL_SIZE=20
POSTGRES_MAX_OVERFLOW=30
POSTGRES_POOL_TIMEOUT=30
POSTGRES_POOL_RECYCLE=3600
POSTGRES_POOL_PRE_PING=true

# =============================================================================
# GRAPH DATABASE CONFIGURATION (Apache AGE)
# =============================================================================

# Apache AGE Configuration (using same PostgreSQL instance)
AGE_ENABLED=true
AGE_HOST=localhost
AGE_PORT=5432
AGE_DATABASE=whatsapp_assistant
AGE_USERNAME=postgres
AGE_PASSWORD=your_secure_password
AGE_GRAPH_NAME=memory_graph

# Alternative Graph Database Options (disabled by default)
NEO4J_ENABLED=false
NEO4J_URI=bolt://localhost:7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=mem0graph

MEMGRAPH_ENABLED=false
MEMGRAPH_URI=bolt://localhost:7687
MEMGRAPH_USERNAME=memgraph
MEMGRAPH_PASSWORD=mem0graph

# =============================================================================
# LLM CONFIGURATION
# =============================================================================

# OpenAI Configuration
OPENAI_API_KEY=your_openai_api_key
OPENAI_MODEL=gpt-4o
OPENAI_TEMPERATURE=0.2
OPENAI_MAX_TOKENS=1000

# Azure OpenAI Configuration (alternative)
AZURE_OPENAI_ENABLED=false
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_API_KEY=your_azure_api_key
AZURE_OPENAI_API_VERSION=2024-02-01
AZURE_OPENAI_MODEL=gpt-4
AZURE_OPENAI_EMBEDDING_MODEL=text-embedding-3-large

# =============================================================================
# EMBEDDING CONFIGURATION
# =============================================================================

# Embedding Provider Configuration
EMBEDDING_PROVIDER=openai
EMBEDDING_MODEL=text-embedding-3-large
EMBEDDING_DIMENSIONS=1536
EMBEDDING_BATCH_SIZE=100
EMBEDDING_TIMEOUT=30000
EMBEDDING_RETRIES=3

# =============================================================================
# VECTOR STORE CONFIGURATION
# =============================================================================

# pgvector Configuration
VECTOR_STORE_PROVIDER=pgvector
PGVECTOR_COLLECTION=mem0_memories
PGVECTOR_DIMENSIONS=1536
PGVECTOR_INDEX_TYPE=hnsw
PGVECTOR_EF_CONSTRUCTION=200
PGVECTOR_EF_SEARCH=100
PGVECTOR_MAX_CONNECTIONS=16

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# FastAPI Server Settings
HOST=0.0.0.0
PORT=8000
WORKERS=4
RELOAD=false
LOG_LEVEL=info

# CORS Configuration
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8080"]
CORS_CREDENTIALS=true
CORS_METHODS=["GET", "POST", "PUT", "DELETE", "OPTIONS"]
CORS_HEADERS=["*"]

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================

# Memory Management
MAX_MEMORY_ENTRIES_PER_USER=10000
MEMORY_RETENTION_DAYS=365
MEMORY_CLEANUP_INTERVAL=86400
MEMORY_BATCH_SIZE=100

# Caching Configuration
CACHE_ENABLED=true
CACHE_TTL=3600
CACHE_MAX_SIZE=10000

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=1000
RATE_LIMIT_BURST_SIZE=100

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================

# Logging Configuration
LOG_FORMAT=json
LOG_FILE=/app/logs/mem0-server.log
LOG_ROTATION=daily
LOG_RETENTION_DAYS=30

# Metrics and Monitoring
METRICS_ENABLED=true
METRICS_PORT=9090
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30

# Telemetry
TELEMETRY_ENABLED=false
TELEMETRY_ENDPOINT=

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# API Security
API_KEY_ENABLED=false
API_KEY=your_secure_api_key
JWT_SECRET=your_jwt_secret
JWT_EXPIRATION=3600

# SSL/TLS Configuration
SSL_ENABLED=false
SSL_CERT_PATH=/app/certs/cert.pem
SSL_KEY_PATH=/app/certs/key.pem

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Development Mode (set to false in production)
DEBUG=false
DEVELOPMENT_MODE=false

# History Database Path
HISTORY_DB_PATH=/app/data/history.db

# Data Directory
DATA_DIR=/app/data
BACKUP_DIR=/app/backups

# =============================================================================
# INTEGRATION SETTINGS
# =============================================================================

# AI WhatsApp Assistant Integration
WHATSAPP_ASSISTANT_ENABLED=true
WHATSAPP_ASSISTANT_URL=http://localhost:3000
WHATSAPP_ASSISTANT_API_KEY=shared_secret_key

# Webhook Configuration
WEBHOOK_ENABLED=false
WEBHOOK_URL=
WEBHOOK_SECRET=

# =============================================================================
# BACKUP AND RECOVERY
# =============================================================================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_INTERVAL=daily
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true

# Recovery Settings
RECOVERY_ENABLED=true
RECOVERY_POINT_OBJECTIVE=1h
RECOVERY_TIME_OBJECTIVE=15m
